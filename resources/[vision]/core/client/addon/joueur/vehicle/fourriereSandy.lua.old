-- local token = nil
-- TriggerEvent("core:RequestTokenAcces", "core", function(t)
--     token = t
-- end)


-- local open = false
-- local main = RageUI.CreateMenu('', "Vehicule", 0.0, 0.0, "shopui_title_carmod", "shopui_title_carmod")
-- local stock = {}

-- main.onClosed = function()
--     open = false
--     RageUI.Visible(main, false)
-- end

-- local spawnCar = {
--     vector4(1724.6531982422, 3712.0656738281, 33.810977935791, 20.704172134399),
-- }

-- function OpenFourriereSandy()
--     if open then
--         open = false
--         RageUI.Visible(main, false)
--         return
--     else
--         open = true
--         RageUI.Visible(main, true)
--         stock = TriggerServerCallback("core:GetVehicles")
--         CreateThread(function()
--             while open do
--                 RageUI.IsVisible(main, function()
--                     if stock ~= nil then
--                         RageUI.Separator("↓ Véhicule personnel ↓")
--                         for k, v in pairs(stock) do
--                             if v.stored > 1 and not v.job and not v.vente then
--                                 RageUI.Button(string.upper(v.veh), false, {}, true, {
--                                     onSelected = function()
--                                         for key, value in pairs(spawnCar) do
--                                             if vehicle.IsSpawnPointClear(vector3(value.x, value.y, value.z), 3.0) then
--                                                 local veh = vehicle.create(v.veh,
--                                                     value
--                                                     , v.props)
--                                                 TaskWarpPedIntoVehicle(p:ped(), veh, -1)
--                                                 TriggerServerEvent("core:SetVehicleOut",
--                                                     string.upper(vehicle.getPlate(veh))
--                                                     ,
--                                                     VehToNet(veh))
--                                                 SetVehicleFuelLevel(veh,
--                                                     GetVehicleHandlingFloat(veh, "CHandlingData", "fPetrolTankVolume"))
--                                                 RageUI.CloseAll()
--                                                 return
--                                             end
--                                         end
--                                     end
--                                 })

--                             end
--                         end
--                         RageUI.Separator("↓ Véhicule Job ↓")

--                         for k, v in pairs(stock) do
--                             if v.stored > 1 and v.job == p:getJob() then
--                                 RageUI.Button(string.upper(v.veh), false, {}, true, {
--                                     onSelected = function()
--                                         for key, value in pairs(spawnCar) do
--                                             if vehicle.IsSpawnPointClear(vector3(value.x, value.y, value.z), 3.0) then
--                                                 local veh = vehicle.create(v.veh,
--                                                     value
--                                                     , v.props)
--                                                 TaskWarpPedIntoVehicle(p:ped(), veh, -1)
--                                                 TriggerServerEvent("core:SetVehicleOut",
--                                                     string.upper(vehicle.getPlate(veh))
--                                                     ,
--                                                     VehToNet(veh))
--                                                 SetVehicleFuelLevel(veh,
--                                                     GetVehicleHandlingFloat(veh, "CHandlingData", "fPetrolTankVolume"))
--                                                 RageUI.CloseAll()
--                                                 return
--                                             end
--                                         end
--                                     end
--                                 })

--                             end
--                         end
--                         RageUI.Separator("↓ Véhicule Crew ↓")
--                         for k, v in pairs(stock) do
--                             if v.stored > 1 and v.vente == p:getCrew() then
--                                 RageUI.Button(string.upper(v.veh), false, {}, true, {
--                                     onSelected = function()
--                                         for key, value in pairs(spawnCar) do
--                                             if vehicle.IsSpawnPointClear(vector3(value.x, value.y, value.z), 3.0) then
--                                                 local veh = vehicle.create(v.veh,
--                                                     value
--                                                     , v.props)
--                                                 TaskWarpPedIntoVehicle(p:ped(), veh, -1)
--                                                 TriggerServerEvent("core:SetVehicleOut",
--                                                     string.upper(vehicle.getPlate(veh))
--                                                     ,
--                                                     VehToNet(veh))
--                                                 SetVehicleFuelLevel(veh,
--                                                     GetVehicleHandlingFloat(veh, "CHandlingData", "fPetrolTankVolume"))
--                                                 RageUI.CloseAll()
--                                                 return
--                                             end
--                                         end
--                                     end
--                                 })

--                             end
--                         end

--                     else
--                         RageUI.Separator("Aucun véhicule")
--                     end
--                 end)
--                 Wait(1)
--             end
--         end)
--     end
-- end

-- CreateThread(function()
--     while zone == nil do Wait(1) end
--     zone.addZone(
--         "fourrière" .. math.random(000000, 99999999), -- Nom
--         vector3(1734.1968994141, 3711.0166015625, 33.144836425781), -- Position
--         "Appuyer sur ~INPUT_CONTEXT~ pour ouvrir la fourrière", -- Text affiché
--         function() -- Action qui sera faite
--             OpenFourriereSandy()
--         end,
--         true, -- Avoir un marker ou non
--         27, -- Id / type du marker
--         0.8, -- La taille
--         { 235, 192, 15 }, -- RGB
--         170-- Alpha
--     )
-- end)
